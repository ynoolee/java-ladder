
# 연습 : 자비지기_LadderGame

자바지기님의 영상 에서의 사다리게임 초기 구현을 생각할 때 , 생각해 볼 수 있는 케이스들

- n 명/높이 1/선이 없는 경우
  - 라인 n 에 대한 결과 는 n 이다

- 2명/높이1/선이1개
  ```markdown
  1 1
  ```
  - 결과
    - 0 -> 1
    - 1 -> 0

- 2명/높이2/선이1
  ```markdown
  1 1
  1 1
  ```
  - 결과
    - 0 -> 0
    - 1 -> 1
- 3명/높이1/선이1
  ```markdown
  1 1 0
  ```
  - 결과
    - 0 -> 1
    - 1 -> 0
    - 2 -> 2
- 3명/높이2/선이2
```markdown
  1 1 0
  0 1 1
  - 0 -> 2
  - 1 -> 0
  - 2 -> 1

```
# 요구사항
- 책임주도설계 기반으로 인터페이스 활용해 프로그래밍하는 연습




# **Clean Code 가이드**

## **객체와 자료 구조**

### **자료/객체**

- 객체는 추상화 뒤로 자료를 숨긴 채 자료를 다루는 함수만 공개한다.
- 자료 구조는 자료를 그대로 공개하며 별다른 함수는 제공하지 않는다.

### **디미터 법칙**

- 디미터 법칙은 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙이다.
- 객체는 자료를 숨기고 함수를 공개한다. 즉, 객체는 조회 함수로 내부 구조를 공개하면 안 된다는 것이다.
- 다음 코드는 디미터 법칙을 어기는 것으로 보인다.

```
final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();

```

### **자료 전달 객체**

- 자료 구조체의 전형적인 형태는 공개 변수만 있고 함수가 없는 클래스다. 이런 자료 구조체를 Data Transfer Object(DTO)라고 한다.
- 자바에서 DTO의 일반적인 형태는 '자바 빈(java bean)' 구조다.

## **클래스**

### **클래스는 작아야 한다.**

- 클래스를 만들 때 첫 번째 규칙은 크기다. 클래스는 작아야 한다. 두 번째 규칙도 크기다. 더 작아야 한다.
- 단일 책임 원칙(Single Responsibility Principle, SRP)은 클래스나 모듈을 변경할 이유가 하나, 단 하나뿐이어야 한다는 원칙이다.
- 클래스는 책임, 즉 변경할 이유가 하나여야 한다는 의미다.
- 응집도(cohesion) - 클래스는 인스턴스 변수 수가 작아야 한다.
- 응집도를 유지하면 작은 클래스 여럿이 나온다.
- 큰 함수를 작은 함수 여럿으로 쪼개다 보면 종종 작은 클래스 여럿으로 쪼갤 기회가 생긴다. 그러면서 프로그램에 체계가 더 잡히고 구조가 더 투명해진다.

### **변경하기 쉬운 클래스**

- 요구사항은 변화기 마련이다. 따라서 코드도 변하기 마련이다.
- 구현 클래스에 의존하게 되면 테스트가 어려우며, 변화에 빠르게 대응하기 힘들다. 변화에 따르게 대응하려면 DIP 원칙을 지키는 습관을 가져야 한다.
- DIP(Dependency Inversion Principle) 원칙은 클래스가 상세한 구현이 아니라 추상화(인터페이스)에 의존해야 한다는 원칙이다.
- 테스트가 가능할 정도로 시스템 결합도를 낮추면 유연성과 재사용성도 더 높아진다.

----



# 미션 시작

## LadderGame
- 2명 이상의 참여자가 필요하다
  - 사람 수 만큼의 라인을 갖는 사다리를 생성한다
- 동일한 높이에 다리는 연속할 수 없다
- 다리는 랜덤으로 생성한다
- 사다리의 높이를 알려준다
- 게임을 실행할 경우 플레이어들에 대한 보상 결과를 계산한다
  - 게임 실행시 플레이어 수 보다 적은 보상이 주어질 경우 에러가 발생한다

```java
public class Line {
  private List<Boolean> points = new ArrayList<>();

  public Line (int countOfPerson) {
    // 라인의 좌표 값에 선이 있는지 유무를 판단하는 로직 추가
  }
}
```

## Height
- 사다리의 높이는 1이상 이어야 한다


## Row
- 🤔 미션 자체는 다소 추상적이다. 브릿지 생성과 관련해서는 내가 결정할 사항 같다. 수업 영상도 암것도 없음 ㅠㅠ


```markdown
|  |--|
|--|  |

사다리를 아래와 같이 표현한다고 하였을 때
DOWN LEFT  RIGHT
LEFT RIGHT DOWN
```
위 그림 상의 가로 라인을 의미한다

LEFT RIGTH 한 쌍을 브릿지라고 한다

- 특정 지점이 가리키는 방향이 어디인지 알려준다
  - Row 의 각 지점은 다음 방향을 가리킨다.
- 하나의 Row 에는 브릿지가 연속해서 존재할 수 없다
  - 조건을 만족하는 상황에서 브릿지는 랜덤으로 생성된다. 
- 특정 지점이 브릿지의 시작인지 여부를 알려준다
- row 를 이루는 라인 수를 알려준다
- row 는 2개 이상의 라인으로 이루어져야 한다
- row 생성 전략이 주어져야 한다

![img.png](img.png)

## Player
- 플레이어 이름은 최대 5글자다

## LadderPlayers
- 라인 n 에 위치한 플레이어를 알려준다 

## LadderRewards
- 라인 n 에 위치한 보상을 알려준다

## StringParser
- delimiter 를 기준으로 문자열을 파싱한 결과를 돌려준다


## 입력
- 사람 이름은 쉽표(,) 를 기준으로 구분한다
- 입,출력에 대한 동시성은 고려하지 않음

## 출력
- 출력 할 때 사라디 폭은, 사람 이름의 최대 글자 이상 이어야 한다
- 5글자 미만의 이름은 뒤쪽에 띄어쓰기를 통해 5글자를 맞춘다
- 출력 조건에 맞추어 row 를 출력한다
- 출력 조건에 맞추어 Ladder 를 출력한다
- 입,출력에 대한 동시성은 고려하지 않음

## Result

## Level 2 요구사항
```
참여할 사람 이름을 입력하세요. (이름은 쉼표(,)로 구분하세요)
pobi,honux,crong,jk

최대 사다리 높이는 몇 개인가요?
5

실행결과

pobi  honux crong   jk
|-----|     |-----|
|     |-----|     |
|-----|     |     |
|     |-----|     |
|-----|     |-----|
```

## 수정필요
- [x] 어디는 생성자에 로직 들어가 있고, 어디는 생성자 팩토리 메서드에 로직 들어가있음
  - 캐싱 등을 적용하고 싶은 경우에 대해 정적 팩토리 메서드를 사용하도록 하였다

## Level 3
```
참여할 사람 이름을 입력하세요. (이름은 쉼표(,)로 구분하세요)
pobi,honux,crong,jk

실행 결과를 입력하세요. (결과는 쉼표(,)로 구분하세요)
꽝,5000,꽝,3000

최대 사다리 높이는 몇 개인가요?
5

사다리 결과

pobi  honux crong   jk
    |-----|     |-----|
    |     |-----|     |
    |-----|     |     |
    |     |-----|     |
    |-----|     |-----|
꽝    5000  꽝    3000

결과를 보고 싶은 사람은?
pobi

실행 결과
꽝

결과를 보고 싶은 사람은?
all

실행 결과
pobi : 꽝
honux : 3000
crong : 꽝
jk : 5000
```

### 프로그래밍 요구사항
- 자바 8의 스트림과 람다를 적용해 프로그래밍한다.
- 규칙 6: 모든 엔티티를 작게 유지한다.
- 규칙 7: -> 클래스는 2개 이하의 인스턴스 변수만을 갖는다



### TODO 나열하기
- 플레이어 A 의 실행결과를 계산한다
  - N 번 라인에서 시작한 결과를 계산한다
  - 플레이어 A 는 몇 번 라인인지 알려준다
  - 라인 A 의 보상이 무엇인지 알려준다
